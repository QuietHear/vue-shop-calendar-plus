(function(e,k){typeof exports=="object"&&typeof module<"u"?module.exports=k(require("vue")):typeof define=="function"&&define.amd?define(["vue"],k):(e=typeof globalThis<"u"?globalThis:e||self,e.vueShopCalendarPlus=k(e.Vue))})(this,function(e){"use strict";const k="",E=(o,c)=>{const s=o.__vccOpts||o;for(const[a,g]of c)s[a]=g;return s},M={name:"vueShopCalendarPlus",emits:["update:modelValue","change"],props:{modelValue:{type:String,default:""},i18n:{type:Boolean,default:!1},firstDay:{type:Number,default:1},props:{type:Object,default:()=>({})},workDay:{type:Array,default:()=>[]},restDay:{type:Array,default:()=>[]},diyDay:{type:Array,default:()=>[]}},setup(o,{attrs:c,slots:s,emit:a,expose:g}){const F=e.ref({workDayKey:o.props.workDayKey||"",restDayKey:o.props.restDayKey||"",diyDayDayKey:o.props.diyDayDayKey||"day",diyDayDesKey:o.props.diyDayDesKey||"des"});let t=e.ref([]),i=e.ref([]),r=e.ref({year:"",month:"",valFullTime:""});const h=e.ref(42),A=n=>n%4===0?n%100===0?n%400===0:!0:!1,V=(n,l)=>{switch(l){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 2:return A(n)?29:28;case 4:case 6:case 9:case 11:return 30}},f=n=>{const l=new Date(n);return{year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate(),weekDay:l.getDay(),fullTime:`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`,valFullTime:`${l.getFullYear()}-${l.getMonth()+1>9?l.getMonth()+1:"0"+(l.getMonth()+1)}-${l.getDate()>9?l.getDate():"0"+l.getDate()}`,inMonth:!1}},W=()=>{const n=o.i18n?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"];let l=o.firstDay-1;for(let d=0;d<7;d++,l++)l>6&&(l=0),t.value.push(n[l])},$=(n,l)=>{i.value=[];for(let y=0;y<V(n,l);y++){let D=f(`${n}-${l}-${y+1}`);D.inMonth=!0,i.value.push(D)}let d=n,u=l-1,m=i.value[0].weekDay-o.firstDay;u===0&&(d=n-1,u=12),m<0&&(m+=7);for(let y=0;y<m;y++){let D=f(`${d}-${u}-${V(d,u)-y}`);i.value.unshift(D)}let B=n,_=l+1,z=h.value-i.value.length;_===13&&(B=n+1,_=1);for(let y=0;y<z;y++){let D=f(`${B}-${_}-${y+1}`);i.value.push(D)}},T=n=>{(r.value.year!==n.year||r.value.month!==n.month)&&$(n.year,n.month),r.value={...n},a("change",n,{startTime:i.value[0].valFullTime,endTime:i.value[h.value-1].valFullTime})},S=async(n,l)=>{let d=null;if(l===1)d={...n};else{let u=r.value.year,m=r.value.month;m+=n,m>12?(m=1,u+=1):m<1&&(m=12,u-=1),d={...f(`${u}-${m}-1`)}}await a("update:modelValue",d.valFullTime),o.modelValue||T(d)},I=e.ref(f(new Date().toLocaleDateString())),q=e.computed(()=>`${r.value.year}${o.i18n?"-":"\u5E74"}${r.value.month>9?"":"0"}${r.value.month}${o.i18n?"":"\u6708"}`);return e.watch(()=>o.modelValue,()=>{T(f(o.modelValue))}),W(),o.modelValue?T(f(o.modelValue)):S(f(new Date().toLocaleDateString()),1),{nameSet:F,weekList:t,monthData:i,selectDay:r,changeTime:S,today:I,topMiddle:q}}},N={class:"vue-shop-calendar-plus"},v={class:"calendar-top"},x={class:"middle-msg"},C={class:"calendar-center"},K={class:"calendar-bottom"},p=["onClick"],b={class:"item-tit"},L={key:0,class:"work-txt"},Y={key:1,class:"rest-txt"},j={class:"item-div-content"};function O(o,c,s,a,g,F){return e.openBlock(),e.createElementBlock("div",N,[e.createElementVNode("div",v,[e.createElementVNode("div",{class:"left-btn",onClick:c[0]||(c[0]=t=>a.changeTime(-1,2))},"<"),e.createElementVNode("div",x,[e.createTextVNode(e.toDisplayString(a.topMiddle)+" ",1),a.selectDay.fullTime!==a.today.fullTime?(e.openBlock(),e.createElementBlock("div",{key:0,class:"other-msg",onClick:c[1]||(c[1]=t=>a.changeTime(a.today,1))}," \u4ECA ")):e.createCommentVNode("",!0)]),e.createElementVNode("div",{class:"right-btn",onClick:c[2]||(c[2]=t=>a.changeTime(1,2))},">")]),e.createElementVNode("div",C,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.weekList,(t,i)=>(e.openBlock(),e.createElementBlock("div",{class:"item",key:i},e.toDisplayString(t),1))),128))]),e.createElementVNode("div",K,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(a.monthData,(t,i)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",t.day<9?"samll-num":"",t.valFullTime===a.today.valFullTime?"is-today":"",t.valFullTime===a.selectDay.valFullTime?"select":"",t.weekDay===6||t.weekDay===0?"rest":"",t.inMonth?"":"not-in-month"]),key:i,onClick:r=>t.valFullTime===a.selectDay.valFullTime?null:a.changeTime(t,1)},[e.createElementVNode("div",b,[e.createTextVNode(e.toDisplayString(t.day)+" ",1),(a.nameSet.workDayKey?s.workDay.findIndex(r=>r[a.nameSet.workDayKey]===t.valFullTime)!==-1:s.workDay.indexOf(t.valFullTime)!==-1)?(e.openBlock(),e.createElementBlock("div",L,e.toDisplayString(s.i18n?"work":"\u73ED"),1)):e.createCommentVNode("",!0),(a.nameSet.restDayKey?s.restDay.findIndex(r=>r[a.nameSet.restDayKey]===t.valFullTime)!==-1:s.restDay.indexOf(t.valFullTime)!==-1)?(e.openBlock(),e.createElementBlock("div",Y,e.toDisplayString(s.i18n?"rest":"\u4F11"),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",j,[e.renderSlot(o.$slots,"dateCell",{date:t,data:{isToday:t.valFullTime===a.today.valFullTime,isSelected:t.valFullTime===a.selectDay.valFullTime,isRest:t.weekDay===6||t.weekDay===0,isInMonth:t.inMonth}},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.diyDay.filter(r=>r[a.nameSet.diyDayDayKey]===t.valFullTime),(r,h)=>(e.openBlock(),e.createElementBlock("div",{key:h},e.toDisplayString(h+1)+". "+e.toDisplayString(r[a.nameSet.diyDayDesKey]),1))),128))])])],10,p))),128))])])}const P=[E(M,[["render",O]])],w={install(o){P.forEach(c=>{o.component(c.name,c)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(w),w});
