(function(e,k){typeof exports=="object"&&typeof module<"u"?module.exports=k(require("vue")):typeof define=="function"&&define.amd?define(["vue"],k):(e=typeof globalThis<"u"?globalThis:e||self,e.vueShopCalendarPlus=k(e.Vue))})(this,function(e){"use strict";const k="",B={class:"vue-shop-calendar-plus"},E={class:"calendar-top"},N={class:"middle-msg"},S={class:"calendar-center"},M={class:"calendar-bottom"},x=["onClick"],K={class:"item-tit"},_={key:0,class:"work-txt"},C={key:1,class:"rest-txt"},b={class:"item-div-content"},L=[{__name:"index",props:{modelValue:{type:String,default:""},i18n:{type:Boolean,default:!1},firstDay:{type:Number,default:1},props:{type:Object,default:()=>({})},workDay:{type:Array,default:()=>[]},restDay:{type:Array,default:()=>[]},diyDay:{type:Array,default:()=>[]}},emits:["update:modelValue","change"],setup(c,{emit:p}){const o=c,f=e.ref({workDayKey:o.props.workDayKey||"",restDayKey:o.props.restDayKey||"",diyDayDayKey:o.props.diyDayDayKey||"day",diyDayDesKey:o.props.diyDayDesKey||"des"});let F=e.ref([]),d=e.ref([]),r=e.ref({year:"",month:"",valFullTime:""});const $=e.ref(42),Y=n=>n%4===0?n%100===0?n%400===0:!0:!1,V=(n,l)=>{switch(l){case 1:case 3:case 5:case 7:case 8:case 10:case 12:return 31;case 2:return Y(n)?29:28;case 4:case 6:case 9:case 11:return 30}},y=n=>{const l=new Date(n);return{year:l.getFullYear(),month:l.getMonth()+1,day:l.getDate(),weekDay:l.getDay(),fullTime:`${l.getFullYear()}-${l.getMonth()+1}-${l.getDate()}`,valFullTime:`${l.getFullYear()}-${l.getMonth()+1>9?l.getMonth()+1:"0"+(l.getMonth()+1)}-${l.getDate()>9?l.getDate():"0"+l.getDate()}`,inMonth:!1}},j=()=>{const n=o.i18n?["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]:["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u65E5"];let l=o.firstDay-1;for(let t=0;t<7;t++,l++)l>6&&(l=0),F.value.push(n[l])},O=(n,l)=>{d.value=[];for(let i=0;i<V(n,l);i++){let u=y(`${n}-${l}-${i+1}`);u.inMonth=!0,d.value.push(u)}let t=n,s=l-1,a=d.value[0].weekDay-o.firstDay;s===0&&(t=n-1,s=12),a<0&&(a+=7);for(let i=0;i<a;i++){let u=y(`${t}-${s}-${V(t,s)-i}`);d.value.unshift(u)}let D=n,T=l+1,W=$.value-d.value.length;T===13&&(D=n+1,T=1);for(let i=0;i<W;i++){let u=y(`${D}-${T}-${i+1}`);d.value.push(u)}},g=n=>{(r.value.year!==n.year||r.value.month!==n.month)&&O(n.year,n.month),r.value={...n},p("change",n,{startTime:d.value[0].valFullTime,endTime:d.value[$.value-1].valFullTime})},m=async(n,l)=>{let t=null;if(l===1)t={...n};else{let s=r.value.year,a=r.value.month;a+=n,a>12?(a=1,s+=1):a<1&&(a=12,s-=1),t={...y(`${s}-${a}-1`)}}await p("update:modelValue",t.valFullTime),o.modelValue||g(t)},h=e.ref(y(new Date().toLocaleDateString())),A=e.computed(()=>`${r.value.year}${o.i18n?"-":"\u5E74"}${r.value.month>9?"":"0"}${r.value.month}${o.i18n?"":"\u6708"}`);return e.watch(()=>o.modelValue,()=>{g(y(o.modelValue))}),j(),o.modelValue?g(y(o.modelValue)):m(y(new Date().toLocaleDateString()),1),(n,l)=>(e.openBlock(),e.createElementBlock("div",B,[e.createElementVNode("div",E,[e.createElementVNode("div",{class:"left-btn",onClick:l[0]||(l[0]=t=>m(-1,2))},"<"),e.createElementVNode("div",N,[e.createTextVNode(e.toDisplayString(e.unref(A))+" ",1),e.unref(r).fullTime!==e.unref(h).fullTime?(e.openBlock(),e.createElementBlock("div",{key:0,class:"other-msg",onClick:l[1]||(l[1]=t=>m(e.unref(h),1))}," \u4ECA ")):e.createCommentVNode("",!0)]),e.createElementVNode("div",{class:"right-btn",onClick:l[2]||(l[2]=t=>m(1,2))},">")]),e.createElementVNode("div",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(F),(t,s)=>(e.openBlock(),e.createElementBlock("div",{class:"item",key:s},e.toDisplayString(t),1))),128))]),e.createElementVNode("div",M,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(t,s)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["item",t.day<9?"samll-num":"",t.valFullTime===e.unref(h).valFullTime?"is-today":"",t.valFullTime===e.unref(r).valFullTime?"select":"",t.weekDay===6||t.weekDay===0?"rest":"",t.inMonth?"":"not-in-month"]),key:s,onClick:a=>t.valFullTime===e.unref(r).valFullTime?null:m(t,1)},[e.createElementVNode("div",K,[e.createTextVNode(e.toDisplayString(t.day)+" ",1),(e.unref(f).workDayKey?c.workDay.findIndex(a=>a[e.unref(f).workDayKey]===t.valFullTime)!==-1:c.workDay.indexOf(t.valFullTime)!==-1)?(e.openBlock(),e.createElementBlock("div",_,e.toDisplayString(c.i18n?"work":"\u73ED"),1)):e.createCommentVNode("",!0),(e.unref(f).restDayKey?c.restDay.findIndex(a=>a[e.unref(f).restDayKey]===t.valFullTime)!==-1:c.restDay.indexOf(t.valFullTime)!==-1)?(e.openBlock(),e.createElementBlock("div",C,e.toDisplayString(c.i18n?"rest":"\u4F11"),1)):e.createCommentVNode("",!0)]),e.createElementVNode("div",b,[e.renderSlot(n.$slots,"dateCell",{date:t,data:{isToday:t.valFullTime===e.unref(h).valFullTime,isSelected:t.valFullTime===e.unref(r).valFullTime,isRest:t.weekDay===6||t.weekDay===0,isInMonth:t.inMonth}},()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(c.diyDay.filter(a=>a[e.unref(f).diyDayDayKey]===t.valFullTime),(a,D)=>(e.openBlock(),e.createElementBlock("div",{key:D},e.toDisplayString(D+1)+". "+e.toDisplayString(a[e.unref(f).diyDayDesKey]),1))),128))])])],10,x))),128))])]))}}],w={install(c){L.forEach(p=>{c.component("vueShopCalendarPlus",p)})}};return typeof window<"u"&&window.Vue&&window.Vue.use(w),w});
